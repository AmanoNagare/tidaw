# TIDaw

React、TypeScript、WebAssembly で構築された最新のブラウザベース Digital Audio Workstation（DAW）です。

## 🎵 機能

### コア DAW コンポーネント

- **ピアノロールエディタ**: ドラッグアンドドロップ機能を持つインタラクティブな MIDI ノート編集
- **タイムラインビュー**: マルチトラックアレンジメントとクリップ管理
- **プロパティパネル**: トラック、クリップ、エフェクトのリアルタイムパラメータ編集
- **ステータスバー**: トランスポートコントロール、テンポ、時間表示、ユーティリティ機能

### 技術的特徴

- **WebAssembly 統合**: Rust/WASM を使用した高性能オーディオ処理
- **レスポンシブレイアウト**: 同期スクロール付きリサイズ可能パネル
- **リアルタイムオーディオ**: 低レイテンシオーディオ処理と再生
- **モダン UI**: React 19、TypeScript、Tailwind CSS で構築

## 🚀 始め方

### 前提条件

- Node.js（v18 以上）
- Rust と Wasm-pack（WebAssembly コンパイル用）
- WebAssembly 対応のモダンウェブブラウザ

### インストール

1. **リポジトリをクローン**

   ```bash
   git clone <repository-url>
   cd tidaw
   ```

2. **依存関係のインストール**

   ```bash
   npm install
   ```

3. **WebAssembly モジュールのビルド**

   ```bash
   # 開発用
   npm run build:wasm:dev

   # 本番用
   npm run build:wasm
   ```

4. **開発サーバーの起動**

   ```bash
   npm run dev
   ```

5. **ブラウザで開く**
   `http://localhost:5173` にアクセス

### WSL セットアップ（Windows）

Rust 開発で WSL を使用している場合：

```bash
# 開発ビルド
wsl -d arch -- bash ./build-wasm-wsl.sh dev

# 本番ビルド
wsl -d arch -- bash ./build-wasm-wsl.sh
```

## 🏗️ アーキテクチャ

### フロントエンド（React/TypeScript）

```
src/
├── _Screens/           # メインUIコンポーネント
│   ├── PianoRoll/     # MIDIエディタインターフェース
│   ├── Timeline/      # トラックアレンジメントビュー
│   ├── StatusBar/     # トランスポートとユーティリティ
│   └── Property/      # パラメータコントロール
├── components/        # 再利用可能UIコンポーネント
├── hooks/            # カスタムReactフック
├── types/            # TypeScript定義
└── utils/            # ヘルパー関数
```

### バックエンド（Rust/WebAssembly）

```
rust-wasm/
├── src/
│   ├── lib.rs        # WASMバインディングとオーディオプロセッサ
│   └── utils.rs      # ユーティリティ関数
└── Cargo.toml        # Rust依存関係
```

### コンポーネント別主要機能

#### ピアノロール

- インタラクティブな MIDI ノート作成・編集
- マルチ選択とバッチ操作
- ズームとスクロールの同期
- リアルタイムベロシティとタイミング調整

#### タイムライン

- マルチトラックオーディオ/MIDI アレンジメント
- クリップ管理と編集
- グリッドスナップとクオンタイゼーション
- ルーティングコントロール付きトラックヘッダー

#### プロパティパネル

- 選択に基づく動的パラメータ編集
- WebAssembly 経由のリアルタイム更新
- トラック、クリップ、エフェクト、マスター設定のサポート

#### ステータスバー

- トランスポートコントロール（再生、一時停止、停止、録音）
- テンポコントロールと時間表示
- マスターボリュームとユーティリティトグル
- ループとメトロノームコントロール

## 🛠️ 開発

### ビルドスクリプト

- `npm run dev` - 開発サーバー起動
- `npm run build` - 本番用ビルド
- `npm run build:wasm` - Rust を WebAssembly にコンパイル
- `npm run build:wasm:dev` - 開発用 WASM ビルド
- `npm run lint` - ESLint 実行
- `npm run preview` - 本番ビルドプレビュー

### プロジェクト構造

- **モジュラー設計**: 各画面コンポーネントは自己完結型
- **型安全性**: 厳密な型付けによる完全な TypeScript カバレッジ
- **パフォーマンス**: オーディオ処理用 WebAssembly
- **レスポンシブ**: 異なる画面サイズに対応するアダプティブレイアウト

### 技術スタック

- **フロントエンド**: React 19、TypeScript、Tailwind CSS
- **ビルドツール**: 専用 WASM プラグイン付き Vite
- **オーディオ処理**: WebAssembly にコンパイルされた Rust
- **スタイリング**: カスタムコンポーネント付き Tailwind CSS
- **開発**: ESLint、ホットモジュールリプレースメント

## 🎹 使用方法

### 基本ワークフロー

1. **ノート作成**: ピアノロールでクリック&ドラッグして MIDI ノートを作成
2. **タイムライン編集**: タイムラインビューでクリップとトラックをアレンジ
3. **パラメータ調整**: プロパティパネルで設定を変更
4. **トランスポートコントロール**: ステータスバーで再生と録音を制御

### キーボードショートカット

- Space: 再生/一時停止
- Ctrl+Z: 元に戻す
- Ctrl+Y: やり直し
- Delete: 選択したノート/クリップを削除

## 🔧 設定

プロジェクトは以下の設定ファイルを使用：

- `vite.config.ts` - WASM サポート付きビルド設定
- `tsconfig.json` - TypeScript コンパイラオプション
- `eslint.config.js` - コードリンティングルール
- `Cargo.toml` - Rust 依存関係とビルド設定

## 🤝 貢献

1. リポジトリをフォーク
2. 機能ブランチを作成
3. 変更を加える
4. テストの通過とコードリンティングを確認
5. プルリクエストを送信

## 📝 ライセンス

このプロジェクトは LICENSE ファイルに記載された条件の下でライセンスされています。

## 🔮 今後のロードマップ

- [ ] オーディオファイルのインポート/エクスポート
- [ ] エフェクト用プラグインシステム
- [ ] リアルタイムコラボレーション
- [ ] 高度なミキシングコンソール
- [ ] MIDI コントローラーサポート
- [ ] オーディオ録音機能

---

**注意**: これはオーディオ制作用の最新ウェブ技術を実証するブラウザベース DAW プロジェクトです。WebAssembly のパフォーマンスとウェブ技術の柔軟性を組み合わせて、プロフェッショナルなオーディオ編集環境を作成しています。
